!CompoundExecutor
components:
  - !ImageReader
    metas:
      name: img_read
  - !ImageNormalizer
    with:
      img_mean: [0.485, 0.456, 0.406]
      img_std: [0.229, 0.224, 0.225]
    metas:
      name: img_norm
  - !CenterImageCropper
    with:
      target_size: 96
      channel_axis: -1
    metas:
      name: img_cropper      
metas:
  name: compound_crafter
requests:
  on:
    IndexRequest:
      - !CraftDriver
        with:
          traversal_paths: ['r']
          executor: img_read
      - !CraftDriver
        with:
          traversal_paths: ['r']
          executor: img_norm
      - !PngToDiskDriver
        with:
          prefix: 'norm'          
      - !CraftDriver
        with:
          traversal_paths: ['r']
          executor: img_cropper          
      - !PngToDiskDriver
        with:
          prefix: 'crop'          
    SearchRequest:
      - !URI2Buffer
        with:
          traversal_paths: ['r']
      - !CraftDriver
        with:
          traversal_paths: ['r']
          executor: img_read
      - !CraftDriver
        with:
          traversal_paths: ['r']
          executor: img_norm
      - !CraftDriver
        with:
          traversal_paths: ['r']
          executor: img_cropper           
    ControlRequest:
      - !ControlReqDriver {}
